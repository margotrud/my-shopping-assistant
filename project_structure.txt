1. Chatbot/
├── 1.1 cache/
│   ├── __init__.py
│   └── llm_cache.py
│       └── [1.1.1] ColorLLMCache class
│           ├── get_rgb()
│           ├── store_rgb()
│           ├── get_simplified()
│           ├── store_simplified()
│           ├── save()
│           ├── load()
│           └── clear()
│
├── 1.2 data/
│   ├── expression_context_rules.json
│   ├── expression_definition.json
│   ├── known_modifiers.json
│   └── products.json
│
├── 1.3 extractors/
│   ├── brand/
│   ├── category/
│   └── color/
│       ├── __init__.py
│       ├── extractor.py
│
│       ├── extraction/
│       │   ├── __init__.py
│       │   ├── compound.py
│       │   │   ├── [1.3.1] extract_compound_phrases()
│       │   │   ├── [1.3.2] extract_from_adjacent()
│       │   │   ├── [1.3.3] split_tokens_to_parts()
│       │   │   ├── [1.3.4] extract_from_glued()
│       │   │   ├── [1.3.5] extract_from_split()
│       │   │   └── [1.3.6] attempt_mod_tone_pair()
│       │   │
│       │   ├── phrase_aggregator.py
│       │   │   ├── [1.3.7] extract_all_descriptive_color_phrases()
│       │   │   ├── [1.3.8] extract_phrases_from_segment()
│       │   │   └── [1.3.9] aggregate_color_phrase_results()
│       │   │
│  	|   └── simplifier.py
│       │       ├── [1.3.10] extract_standalone_phrases()
│       │       ├── [1.3.11] _inject_expression_modifiers()
│       │       ├── [1.3.12] _extract_filter_tokens()
│       │       ├── [1.3.13] _finalize_standalone_phrases()	
│       │       └── [1.3.14] extract_lone_tones()
│       │    

│
│       ├── llm/
│       │   ├── __init__.py
│       │   ├── llm_api_client.py
│       │   │   ├── [1.3.15] buil_color_prompt()
│       │   │   ├── [1.3.16] build_llm_request_payload()
│       │   │   ├── [1.3.17] build_llm_headers()
│       │   │   ├── [1.3.18] _parse_rgb_tuple()
│       │   │   └── [1.3.19] query_llm_for_rgb()
│       │   │
│       │   ├── llm_rgb.py
│       │   │   ├── [1.3.20] resolve_rgb_with_llm()
│       │   │   ├── [1.3.21] get_rgb_from_descriptive_color_llm_first()
│       │   │   └── [1.3.22] _try_simplified_match()
│       │   │
│       │   └── simplifier.py
│       │       ├── [1.3.23] simplify_phrase_if_needed()
│       │       ├── [1.3.24] is_valid_tone()
│       │       ├── [1.3.25] extract_suffix_fallbacks()
│       │       ├── [1.3.26] build_prompt()
│       │       └── [1.3.27] simplify_color_description_with_llm()
│
│       ├── logic/
│       │   ├── color_categorizer.py
│       │   │   ├── [1.3.28] build_tone_modifier_mappings()
│       │   │   └── [1.3.29] format_tone_modifier_mappings()
│       │   │
│       │   ├── color_pipeline.py
│       │   │   ├── [1.3.30] process_color_phrase()
│       │   │   ├── [1.3.31] process_segment_colors()
│       │   │   ├── [1.3.32] resolve_fallback_tokens()	
│       │   │
│       │   ├── compound_rule.py
│       │   │   └── [1.3.33] is_blocked_modifier_tone_pair()
│       │   │
│       │   ├── expression_matcher.py
│       │   │   ├── [1.3.34] get_valid_tokens()
│       │   │   ├── [1.3.35] map_expressions_to_tones()
│       │   │   ├── [1.3.36] apply_expression_context_rules()
│       │   │   └── [1.3.37] apply_expression_suppression_rules()
│       │   │
│       │   └── sentiment_router.py
│       │       └── [1.3.38] build_color_sentiment_summary()
│
│       ├── shared/
│       │   ├── constants.py
│       │   │   ├── [1.3.39] BLOCKED_TOKENS
│       │   │   ├── [1.3.40] COSMETIC_NOUNS
│       │   │   └── [1.3.41] EXPRESSION_SUPPRESSION_RULES
|	|   |	|
│       │   │   └── [1.3.42] SEMANTIC_CONFLICTS
│       │   │
│       │   └── vocab.py
│       │       ├── [1.3.43] cosmetic_fallbacks
│       │       ├── [1.3.44] known_tones
│       │       └── [1.3.45] all_webcolor_names
│       └── utils/
│           ├── config_loader.py
│           │   ├── [1.3.46] load_json_from_data_dir()
│           │   ├── [1.3.47] load_known_modifiers()
│           │   ├── [1.3.48] load_known_suffix_tokens()
│           │   └── [1.3.49] load_expression_context_rules()
│           │
│           ├── expression_helpers.py
│           │   ├── [1.3.50] get_all_trigger_tokens()
│           │   └── [1.3.51] get_glued_token_vocabulary()
│           │
│           ├── modifier_resolution.py
│           │   ├── [1.3.52] is_known_tone()
│           │   ├── [1.3.53] match_direct_modifier()
│           │   ├── [1.3.54] match_suffix_fallback()
│           │   ├── [1.3.55] fuzzy_match_modifier_safe()
│           │   ├── [1.3.56] _fuzzy_match_modifier()
│           │   ├── [1.3.57] resolve_modifier_token()
│           │   ├── [1.3.58] is_y_suffix_from_tone()
│           │   └── [1.3.59] should_suppress_compound()
│           │
│           ├── nlp_utils.py
│           │   └── [1.3.60] are_antonyms()
│           │
│           ├── rgb_distance.py
│           │   ├── [1.3.61] rgb_distance()
│           │   ├── [1.3.62] is_within_rgb_margin()
│           │   ├── [1.3.63] choose_representative_rgb()
│           │   ├── [1.3.64] find_similar_color_names()
│           │   └── [1.3.65] fuzzy_match_rgb_from_known_colors()
│           │
│           ├── token_utils.py
│           │   ├── [1.3.66] split_glued_tokens()
│           │   └── [1.3.67] singularize()
│
├── 1.4 general/
│   └── utils/
│       ├── fuzzy_match.py
│       │   ├── [1.4.1] normalize_token()
│       │   ├── [1.4.2] fuzzy_token_match()
│       │   ├── [1.4.3] match_expression_aliases()
│       │   ├── [1.4.4] should_accept_multiword_alias()
│       │   ├── [1.4.5] is_exact_match()
│       │   ├── [1.4.6] is_strong_fuzzy_match()
│       │   ├── [1.4.7] is_embedded_alias_conflict()
│       │   ├── [1.4.8] is_modifier_compound_conflict()
│       │   └── [1.4.9] remove_subsumed_matches()
│       │
│       └── tokenize.py
│           └── [1.4.10] get_tokens_and_counts()
│
├── 1.5 price/
│   └── __init__.py
│
└── 1.6 pipelines/
    (currently empty or not yet audited)
